# Bhojpur Host - Cluster Provision Engine

A hosting management tool to provision Kubernetes cluster for different cloud providers.

## Source Build

`make`

## Simple Usage

`hostfarm create --driver $driverName [OPTIONS] cluster-name`

`hostfarm inspect cluster-name`

`hostfarm ls`

`hostfarm update [OPTIONS] cluster-name`

`hostfarm rm cluster-name`

To see what driver create options it has, run

`hostfarm create --driver $driverName --help`

To see what update options for a cluster , run

`hostfarm update --help cluster-name`

A serviceAccountToken which binds to the clusterAdmin is automatically created for you, to see what it
is, run

`hostfarm inspect clusterName`

The current supported driver is gke(https://cloud.google.com/container-engine/)

Before running `gke` driver, make sure you have the credential. To get the credential, you can run any
of the steps below

`gcloud auth login` or

`export GOOGLE_APPLICATION_CREDENTIALS=$HOME/gce-credentials.json` or 

`hostfarm create --driver gke --gke-credential-path /path/to/credential cluster-name`

## Running

`./bin/hostfarm`

## Generated Source Code

The `types/drivers.pb.go` file is a generated file from `Protocol Buffers`. It contains the gRPC
client and server for the Container Cluster Engine drivers. This file is generated from the
`types/drivers.proto` file.

Before running the source code generation script, you must follow the quickstart instructions
[here](https://grpc.io/docs/quickstart/go.html#prerequisites) and install the `protoc` binary and
`protoc` plugin for Go.

After you have installed the prerequisites, the generated code can be generated by running
`task generate`. It will update the `drivers.pb.go` file from the `drivers.proto` template.
This task should be re-run every time `drivers.proto` is changed.
